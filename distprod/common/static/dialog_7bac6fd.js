"use strict";!function(a,c){"function"==typeof define?define("dialog",[],c):(a.app=a.app||{},a.app=c())}(void 0,function(){function a(a){return g.querySelector(a)}function c(a){this.options={bgSwitch:!0};for(var c in a)this.options[c]=a[c];this.__creat()}var g=document,v=0,h=window.innerHeight,y=g.body.clientHeight;"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function a(a){return function(g){var v=c.className.split(/\s+/g),h=v.indexOf(g);a(v,h,g),c.className=v.join(" ")}}var c=this;return{add:a(function(a,c,g){~c||a.push(g)}),remove:a(function(a,c){~c&&a.splice(c,1)}),toggle:a(function(a,c,g){~c?a.splice(c,1):a.push(g)}),contains:function(a){return!!~c.className.split(/\s+/g).indexOf(a)},item:function(i){return c.className.split(/\s+/g)[i]||null}}}}),c.prototype={constructor:c,__creat:function(){var c,v=g.createDocumentFragment(),h=g.createElement("article"),y=g.createElement("div"),b=this.options,D=this,S=function(){var a=!0;return function(e){a&&e.target.id==D.options.id&&(a=!1,D.close.call(D),setTimeout(function(){a=!0},700))}}();h.id=b.id,h.className=b.className?"ui-dialog "+b.className:"ui-dialog",y.className="ui-dialog-wrap",c=b.title?"<div class='ui-dialog-head'><h5>"+b.title+"</h5></div>":"",b.content&&(c+="<div class='ui-dialog-content'>"+b.content+"</div>"),b.footer&&(c+="<div class='ui-dialog-footer'>"+function(){for(var a="",i=0,l=b.footer.length;l>i;i++)b.footer[i].name&&(a+="<button type='button'",b.footer[i].className&&(a+="class="+b.footer[i].className),a+=">"+b.footer[i].name+"</button>");return a}()+"</div>"),b.closeSwitch&&(c+="<div class='ui-dialog-close'><i class='font-icon close'></i></div>"),y.innerHTML=c,h.appendChild(y),v.appendChild(h),this.el&&(g.body.removeChild(this.el),this.el=null),g.body.appendChild(v),this.el=a("#"+b.id),b.bgFn&&this.el.addEventListener("click",S,!1)},__open:function(a){{var c,v=this,b=this.el,D=this.options,S=b.querySelector(".ui-dialog-wrap"),w=g.body.scrollTop;!function(){var a=!0;return function(){return a?(a=!1,!a):a}}()}if(b.style.display="block",c=S.clientHeight,h>=c?S.style.top=w+(h-c)/2+"px":c>h&&h>=y?(S.style.height=h-40+"px",S.style.top="20px"):c>h&&y-w>c?S.style.top=w+Math.min((y-w-c)/2,20)+"px":c>h&&c>=y-w&&(S.style.height=y-w-40+"px",S.style.top=w+Math.min((h-y+w+40)/2,20)+"px"),b.classList.add("in"),D.blindEvent)for(var i=0,l=D.blindEvent.length;l>i;i++){var N=D.blindEvent[i];b.querySelector(N.ele).addEventListener(N.type,N.fn,!1)}a&&"function"==typeof a&&a();var E;if(E&&(clearTimeout(E),E=null),E=setTimeout(function(){b.classList.remove("in")},700),D.tip){var L;L&&(clearTimeout(L),L=null),L=setTimeout(function(){v.close.call(v)},2500)}},__close:function(a){var c=this.el,g=this.options;if(c.classList.add("out"),a&&"function"==typeof a&&a(),g.blindEvent)for(var i=0,l=g.blindEvent.length;l>i;i++){var v=g.blindEvent[i];c.querySelector(v.ele).removeEventListener(v.type,v.fn,!1)}var h;h&&(clearTimeout(h),h=null),h=setTimeout(function(){c.classList.remove("out"),c.style.display="none"},700)}};var b=function(){function h(){var c=a(".ui-modal-bg"),h=a("body");if(!c){var y=g.createElement("div");y.className="ui-modal-bg",g.body.appendChild(y),c=a(".ui-modal-bg")}h.style.overflow="hidden",c.style.display="block",c.style.zIndex=v-50}function y(){var c=a(".ui-modal-bg"),g=a("body");if(c){if(D.length>0)return void(c.style.zIndex=D[D.length-1]-50);var v;v&&(clearTimeout(v),v=null),v=setTimeout(function(){c.style.display="none",g.style.overflow=""},700)}}var b={},D=[];return{dialog:function(a,S){if(a&&a.id){var w,N=a.id;if(b[N])if(w=b[N].dialog,"msg"==S)w.el.querySelector(".ui-dialog-content").innerHTML=a.content;else{var E=!1;for(var L in a)a[L]!==w.options[L]&&(w.options[L]=a[L],E=!0);E&&w.__creat()}else w=new c(a),b[N]={},b[N].dialog=w;return w.open=function(a){w.__open(a),v+=100;for(var c=g.querySelectorAll(".ui-dialog"),l=c.length;l>0;l--)c[l-1].classList.remove("activeDialog");w.el.style.zIndex=v,w.el.classList.add("activeDialog"),w.options.bgSwitch&&(D.push(v),h())},w.close=function(a){w.__close(a),v-=100,w.el.classList.remove("activeDialog"),w.options.bgSwitch&&(D.pop(),y())},w}},tipDialog:function(a){var c=this.dialog({id:"tipDialog",className:"ui-tipDialog",bgSwitch:!1,tip:!0,closeSwitch:!1,bgFn:!1,content:"<div class='ui-tipDialog-con'>"+a+"</div>"},"msg");c.open()},msgDialog:function(a){var c=this.dialog({id:"msgDialog",className:"ui-msgDialog",bgSwitch:!1,closeSwitch:!1,bgFn:!1,content:"<div class='ui-msgDialog-con'>"+a+"</div>",footer:[{name:"确定",className:"ui-msgDialogBtn"}],blindEvent:[{ele:".ui-msgDialogBtn",type:"click",fn:function(){c.close()}}]},"msg");c.open()},simpleDialog:function(a,c,g){var v=this.dialog({id:"simpleDialog",className:"ui-simpleDialog",bgSwitch:!0,closeSwitch:!1,bgFn:!1,content:"<div class='ui-simpleDialog-con'>"+a+"</div>",footer:[{name:"确定",className:"ui-simpleDialogSureBtn"},{name:"取消",className:"ui-simpleDialogCancleBtn"}],blindEvent:[{ele:".ui-simpleDialogSureBtn",type:"click",fn:function(){v.close(c)}},{ele:".ui-simpleDialogCancleBtn",type:"click",fn:function(){v.close(g)}}]});v.open()}}}();return b});