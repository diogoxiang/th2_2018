define("extend",["components/common/common","dialog","lib/wxjs/jweixin-1.2.0","apiData","lib/vue/vue.2.13.min"],function(require,exports,module){"use strict";var app=require("components/common/common"),dialog=require("dialog"),wx=require("lib/wxjs/jweixin-1.2.0"),api=require("apiData"),logintimes=0,tiptimes=0,off=!1,cover="../common/images/qcode.png",isbug=app.getValue("debug"),Vue=require("lib/vue/vue.2.13.min");Vue.filter("format",function(a,c){return a?new Date(a).format(c):void 0}),Vue.filter("formatName",function(a){return a?a:"null"});var extend={version:"0.0.5",geolocation:function a(){var a=new BMap.Geolocation,c=new BMap.Geocoder;a.getCurrentPosition(function(r){this.getStatus()==BMAP_STATUS_SUCCESS?c.getLocation(r.point,function(a){},1):alert("failed"+this.getStatus())},{enableHighAccuracy:!0})},backOut:function(){return window.history.back(),!1},popup:function(a,c,g,h,w,v){var b=arguments.length<=6||void 0===arguments[6]?"0":arguments[6],k=void 0,I=void 0,S=void 0,y=void 0,U=void 0,M=void 0,C=void 0,A=void 0,D=void 0,L=void 0,N=void 0;switch(w){case 1:k="我知道了",I="ui-btnDialogGo",S="."+I,N=[{name:""+k,className:""+I}],L=[{ele:""+S,type:"click",fn:function(){T.close(g)}},{ele:".ui-dialog-close",type:"click",fn:function(){T.close(g)}}];break;case 2:y="确认",U="取消",M="ui-btnSure",C="ui-btnCancel",A="."+M,D="."+C,N=[{name:""+y,className:""+M},{name:""+U,className:""+C}],L=[{ele:""+A,type:"click",fn:function(){try{var a=document.getElementById("checkbox").checked;T.close(g(a))}catch(e){T.close(g())}}},{ele:""+D,type:"click",fn:function(){T.close(h)}},{ele:".ui-dialog-close",type:"click",fn:function(){T.close(h)}}];break;case 3:y="继续挑战",U="排行榜",M="ui-btnSure",C="ui-btnCancel",A="."+M,D="."+C,N=[{name:""+y,className:""+M},{name:""+U,className:""+C}],L=[{ele:""+A,type:"click",fn:function(){T.close(g)}},{ele:""+D,type:"click",fn:function(){T.close(h)}},{ele:".ui-dialog-close",type:"click",fn:function(){T.close(v)}}];break;default:k="我知道了",I="ui-btnDialogGo",S="."+I,N=[{name:""+k,className:""+I}],L=[{ele:""+S,type:"click",fn:function(){T.close(g)}},{ele:".ui-dialog-close",type:"click",fn:function(){T.close(g)}}]}var V=void 0;V=2==w&&1==b?"<div class='ui-btnDialog-con'>"+c+'</div> <div class="nopop"><input type="checkbox" id="checkbox">不再提醒</div>':"<div class='ui-btnDialog-con'>"+c+"</div>";var T=dialog.dialog({id:"btnDialog",className:"ui-btnDialog",bgSwitch:!0,closeSwitch:!0,bgFn:!1,title:"<div>"+a+"</div>",content:V,footer:N,blindEvent:L});T.open()},wxIntercept:function(a){var c=arguments.length<=1||void 0===arguments[1]?1:arguments[1],g=navigator.userAgent.toLowerCase();if("micromessenger"!=g.match(/MicroMessenger/i))return app.linkTo("noscan"),!1;var h=app.getValue("barcodeData","session"),w=app.getValue("wxInfo","local"),v=app.getValue("wxLogin","local");return h=h&&JSON.parse(h),v=v&&JSON.parse(v),w=w&&JSON.parse(w),v||1!=c||"on"!=window.th.status?a&&a(h,v,w):void this.callBackAuth()},callAuth:function(){var a=window.location.href;return app.storeValue("url",a,"session"),window.location.href=window.th.authUrl+encodeURIComponent(window.location.origin+window.th.callPage),!1},callBackAuth:function(){var a=window.location.href;app.storeValue("url",a,"session");var c=window.th.hosturl+window.th.callPage+"?type=4";isbug&&(c+="&o=1"),api.getUserInfoCallBackUrl(c).done(function(a){return 200==a.code?(window.location.href=a.data,!1):void(a.msg&&dialog.tipDialog(a.msg))})},wxWarranty:function(a,c){app.storeValue("url",window.location.pathname,"session");var g=a||window.th.wappId,h=location.origin||location.protocol+"//"+location.hostname,w=c||window.th.Domain+"?"+h+window.th.callPage;return window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+g+"&redirect_uri="+w+"&response_type=code&scope=snsapi_userinfo&state=#wechat_redirect",!1},getCheckout:function(a,c){var g=/^(170|171)\d{8}$/;return g.test(a)?(dialog.tipDialog("该号段暂不支持充值，请重新填写"),!1):c&&c()},changeURLArg:function changeURLArg(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},replaceURL:function(a,c){var g=window.location.href,h=this.changeURLArg(g,a,c);window.history.replaceState(null,null,h)},getValue:function(a){arguments.length<=1||void 0===arguments[1]?"url":arguments[1];return this.getParamValue(a)},getUrlparams:function(){var a=window.location.search,c=a.substr(1,a.length-1).split("&"),g={};if(null!==c)for(var i=0,l=c.length;l>i;i++){var h=c[i].split("=");h&&h.length>1&&(g[decodeURIComponent(h[0])]=h[1])}return g},getParamValue:function(a){var c=this.getUrlparams();return c[a]?app.d.unCompile(c[a]):null},typeName:function(a){var t;return null==a?t=String(a):(t=Object.prototype.toString.call(a).toLowerCase(),t=t.substring(8,t.length-1)),t},linkTo:function(a,c,g){if(app.URL[a]){var h=app.URL[a];if(c){h+="?";var w=this.typeName(c);switch(w){case"string":h+=encodeURIComponent(c);break;case"object":for(var v in c)h+="&"+encodeURIComponent(v)+"="+app.d.Compile(c[v])}}return window.location.href=g?g+h:h,!1}},bannedClick:function(a){var c=off;return c?void 0:(off=!0,a&&a())},doClick:function(a,c){return a?(off=!1,c&&c()):void 0},checkStr:function(s){var a=/[`~!@#$^&*()=|{}':;',\[\].<>\/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]/gi;return a.test(s)?!0:!1},doShare:function(a,c){wx.config({debug:!1,appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["onMenuShareAppMessage","hideMenuItems","onMenuShareTimeline","showOptionMenu","showMenuItems"]}),wx.ready(function(){wx.showOptionMenu(),wx.onMenuShareAppMessage({title:"title画好月圆 宽窄传情",desc:"desc画好月圆 宽窄传情",link:window.th.hosturl+"/"+window.th.sharePage+"?shareid="+c,imgUrl:window.th.hosturl+"/sichuan/2018zhongqiu/https://xxc-oss.taiheiot.com/static/"+cover,trigger:function(){},success:function(){}}),wx.onMenuShareTimeline({title:"title画好月圆 宽窄传情",desc:"desc画好月圆 宽窄传情",link:window.th.hosturl+"/"+window.th.sharePage+"?shareid="+c,imgUrl:window.th.hosturl+"/sichuan/2018zhongqiu/https://xxc-oss.taiheiot.com/static/"+cover,trigger:function(){},success:function(){}}),wx.showMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline"]}),wx.hideMenuItems({menuList:["menuItem:setFont","menuItem:share:qq","menuItem:share:weiboApp","menuItem:favorite","menuItem:share:facebook","menuItem:share:QZone","menuItem:editTag","menuItem:delete","menuItem:copyUrl","menuItem:readMode","menuItem:originPage","menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:share:email","menuItem:share:brand"]})})}};module.exports=extend});