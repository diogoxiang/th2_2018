"use strict";!function(c,a){"function"==typeof define?define("validate",[],a):(c.app=c.app||{},c.app.validate=a())}(void 0,function(){function c(c,a,v){this.options=c,this.success=a,this.error=v,this.init()}function a(c){return document.getElementsByName(c)}function v(c){var v=a(c),h=[];switch(v[0].type){case"radio":case"select-one":h=v[0].selectedIndex>=0?v[0].options[v[0].selectedIndex].value:"";break;case"checkbox":case"select-multiple":w(v,function(c){c.checked&&h.push(c.value||0)});break;default:h=v[0].value}return h}function h(c){var a,c=c.split("|"),v=c.shift();return c.length>0&&(a=c.shift().split(_)),{type:v,param:a}}function g(c){var a=Object.prototype.toString.call(c);return a=a.split(" ").pop(),a.substring(0,a.length-1).toLowerCase()}function y(c){var a=!!c&&"length"in c&&c.length,v=g(c);return"function"===v||null!=c&&c===c.window?!1:"array"===v||0===a||"number"==typeof a&&a>0&&a-1 in c}function w(c,a,v){var h,g,i=0;if(y(c)){for(h=c.length;h>i;i++)if(g=a.call(c[i],c[i],i),v&&!g)return}else for(i in c)if(g=a.call(c[i],c[i],i),v&&!g)return}var _=/[, ]+/g,b=/^1[345678]\d{9}$/,E=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,k=/^\d+(\.\d+)?$/,N=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,A=Array.prototype,D={},L={required:function(c){return"undefined"!=typeof c&&""!==c},tel:function(c){return b.test(c)},number:function(c){return k.test(c)},email:function(c){return E.test(c)},password:function(c){return N.test(c)},compare:function(){var c=A.shift.call(arguments),h=A.slice.call(arguments,0),g=!0;return w(h,function(h){return g=a(h)&&c==v(h)},!0),L.required(c)&&g},lengthLimi:function(c,a,v){if("undefined"==typeof c)return!1;var h=c.length;return v?h>=a&&v>=h:h>=a}},S={required:"此元素不能为空",tel:"请输入正确的手机号码",email:"请输入正确格式的邮箱",password:"密码为8-16位字母与数字组合",compare:"二次输入不一致",lengthLimi:"请输入指定范围内",number:"请输入数字类型"},T=function(){var c=0,v=[];return{getEle:function(){c>v.length-1&&(v[c]=document.createElement("span"),v[c].className="err-msg");var a=v[c];return c++,a},reset:function(){c=0},append:function(c,v,h){var g=a(v),y=g[0].parentNode,w=y.querySelector(".err-msg");h&&(w||(w=T.getEle(),y.appendChild(w)),w.innerText=h)},remove:function(){for(var i=0;c>i;i++)v[i].parentNode&&v[i].parentNode.removeChild(v[i]);T.reset()}}}(),C=function(c){var v={};return function(){v[c]=v[c]||{};var h=v[c];return{listen:function(c,a){h[c]=h[c]||[];var v=!0;w(h[c],function(c){return c.type==a.type&&(v=!1,w(a,function(a,i){c[i]=a})),v},!0),v&&h[c].push(a)},remove:function(c,a){var v=h[c];v&&(a?w(v,function(c,i){return c.type==a?(v.splice(i,1),!1):!0},!0):(v=null,delete h[c]))},getAll:function(){return h},trigger:function(){{var c,v,g=A.shift.apply(arguments),y=h[g],_=!0,b=arguments,E=A.slice.call(arguments,0,1)[0];new RegExp("/^"+g+"w+")}return w(y,function(h){h.param&&A.push.apply(b,h.param);var y=h.fn.apply(this,b);if(y){var w=a(g)[0].parentNode,k=w.querySelector(".err-msg");k&&(k.innerText="")}else{var N=h.error||T.append;N.call(this,E,g,h.message,v)}return h.success&&!c&&(c=h.success),_&&!y&&(_=!1),y},!0),_&&c&&c.call(this,E,g),_}}}()},O=function(){var c=0;return function(){return c++,C(c)}}();return c.prototype={constructor:c,init:function(){var c=this;this._event=O(),w(c.options,function(a){c.add(a)})},add:function(c){var g=this,y=c.name;if(c.type&&w(c.type,function(a){var v=h(a),w=L[v.type];w&&(v.fn=w,v.message=c.message&&c.message[v.type]||S[v.type],v.success=c.success,v.error=c.error,g._event.listen(y,v))}),c.userDefined){var _=c.userDefined;if(_.fn&&this._event.listen(y,{type:"userDefined",fn:_.fn,message:c.message&&c.message.userDefined,success:function(){var v=a(y)[0].parentNode,h=v.querySelector(".err-msg");h&&(h.innerText=""),c.success&&c.success()},error:c.error}),_.type){var b=function(){var c=v(y);g._event.trigger(y,c)};D[y+_.type]=b,w(a(y),function(c){c.addEventListener(_.type,D[y+_.type],!1)})}}},remove:function(c,v){var h=this;if(v){var g=v.types,y=v.userType;if(g&&w(g,function(a){h._event.remove(c,a)}),y){var _=D[c+y];h._event.remove(c,"userDefined"),w(a(c),function(c){c.removeEventListener(y,_,!1)})}}else{h._event.remove(c);var b=new RegExp("/^"+c+"w+");w(D,function(c,a){b.test(a)&&(D[a]=null,delete D[a])})}},checkOne:function(c){var a=v(c),h=this._event.trigger(c,a);return h},checkAll:function(){var c=this,a=!0;T.remove(),w(c._event.getAll(),function(v,h){var g=c.checkOne(h);a&&!g&&(a=!1)}),a?this.success&&this.success():this.error&&this.error()}},c});